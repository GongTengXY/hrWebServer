(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20b1a826"],{"01f5":function(e,t,r){"use strict";t["a"]={hireType:[{id:1,value:"正式"},{id:2,value:"非正式"}],subjection:[{id:"1",value:"总部"},{id:"2",value:"分城市"}],workingState:[{id:"1",value:"在职"},{id:"2",value:"离职"}],leaveType:[{id:"1",value:"主动离职"},{id:"2",value:"被动离职"},{id:"3",value:"退休"}],attritionMonth:[{id:"1",value:"离职日本月"},{id:"2",value:"离职日次月"}],informaltype:[{id:"2",value:"实习"},{id:"3",value:"劳务"},{id:"4",value:"顾问"},{id:"5",value:"返聘"},{id:"6",value:"外包"}],highestDegree:[{id:"1",value:"初中"},{id:"2",value:"高中"},{id:"3",value:"中专"},{id:"4",value:"大专"},{id:"5",value:"本科"},{id:"6",value:"硕士"},{id:"7",value:"博士"},{id:"8",value:"其他"}],isOverseas:[{id:"1",value:"中国大陆"},{id:"2",value:"港澳台国外"}],gender:[{id:"1",value:"男"},{id:"2",value:"女"}],maritaStatus:[{id:"1",value:"未婚"},{id:"2",value:"已婚"},{id:"3",value:"离异"}],animalSymbol:[{id:"1",value:"鼠"},{id:"2",value:"牛"},{id:"3",value:"虎"},{id:"4",value:"兔"},{id:"5",value:"龙"},{id:"6",value:"蛇"},{id:"7",value:"马"},{id:"8",value:"羊"},{id:"9",value:"猴"},{id:"10",value:"鸡"},{id:"11",value:"狗"},{id:"12",value:"猪"}],constellation:[{code:1,value:"水瓶座"},{code:2,value:"双鱼座"},{code:3,value:"白羊座"},{code:4,value:"金牛座"},{code:5,value:"双子座"},{code:6,value:"巨蟹座"},{code:7,value:"狮子座"},{code:8,value:"处女座"},{code:9,value:"天秤座"},{code:10,value:"天蝎座"},{code:11,value:"射手座"},{code:12,value:"摩羯座"}],bloodType:[{id:"1",value:"A型"},{id:"2",value:"B型"},{id:"3",value:"O型"},{id:"4",value:"AB型"}],educationType:[{id:"1",value:"统招"},{id:"2",value:"自考"},{id:"3",value:"成考"}],positiveType:[{id:"1",value:"已转正"},{id:"2",value:"未转正"}],contractPeriod:[{id:"1",value:"6月"},{id:"2",value:"12月"},{id:"3",value:"24月"},{id:"4",value:"36月"},{id:"5",value:"其他"}],renewalCount:[{id:1,value:"0次"},{id:2,value:"1次"},{id:3,value:"2次"},{id:4,value:"3次"},{id:5,value:"4次或以上"}],resumeSource:[{id:"1",value:"智联招聘"},{id:"2",value:"拉勾网"},{id:"3",value:"前程无忧"},{id:"4",value:"猎聘网"},{id:"5",value:"校园宣讲"},{id:"6",value:"猎头"},{id:"7",value:"内部推荐"}],hireSourceType:[{id:"1",value:"社招"},{id:"2",value:"校招"}],departments:[{id:"1",value:"总裁办"},{id:"2",value:"研究院"}],stausInfos:[{id:"1",value:"在职"},{id:"2",value:"入职"},{id:"3",value:"离职"}]}},"0b62":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("PageTools",{attrs:{showTitle:!0},scopedSlots:e._u([{key:"BeforeInfo",fn:function(){return[a("span",[e._v("共有"+e._s(e.pages.total)+"条记录")])]},proxy:!0},{key:"btn",fn:function(){return[a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){return e.$router.push("/Import")}}},[e._v("excel导入")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.exportData}},[e._v("excel导出")]),a("el-button",{attrs:{size:"small",type:"primary",disabled:!e.checkPermission("POINT-USER-ADD")},on:{click:e.changeShowing}},[e._v("+新增员工")])]},proxy:!0}])}),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.List}},[a("el-table-column",{attrs:{label:"序号",sortable:"",type:"index",align:"center",width:"80",fixed:"left"}}),a("el-table-column",{attrs:{label:"姓名",sortable:"",prop:"username",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"头像",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("img",{directives:[{name:"imagerror",rawName:"v-imagerror",value:r("bae5"),expression:"require('@/assets/common/bigUserHeader.png')"}],staticStyle:{"border-radius":"50%",width:"100px",height:"100px",padding:"10px"},attrs:{src:n.staffPhoto},on:{click:function(t){return e.showQrCode(n.staffPhoto)}}})]}}])}),a("el-table-column",{attrs:{label:"手机号",sortable:"",prop:"mobile",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"工号",sortable:"",prop:"workNumber",align:"center",width:"100"}}),a("el-table-column",{attrs:{label:"聘用形式",sortable:"",prop:"formOfEmployment",formatter:e.formatEmployment,align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"部门",sortable:"",prop:"departmentName",align:"center",width:"100"}}),a("el-table-column",{attrs:{label:"入职时间",sortable:"",prop:"timeOfEntry",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e._f("formatDate")(r.timeOfEntry))+" ")]}}])}),a("el-table-column",{attrs:{label:"状态",sortable:"",prop:"formOfEmployment"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("el-switch",{attrs:{value:1===t.formOfEmployment}})]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",sortable:"",width:"280",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$router.push("/employees/detail/"+r.id)}}},[e._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("转正")]),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("调岗")]),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("离职")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.changeState(r.id)}}},[e._v("角色")]),a("el-button",{attrs:{type:"text",size:"small",disabled:!e.checkPermission("point-user-delete")},on:{click:function(t){return e.delEmployees(r.id)}}},[e._v("删除")])]}}])})],1),a("el-row",{staticStyle:{height:"60px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.pages.total,"page-size":e.pages.size},on:{"current-change":e.changePage}})],1)],1),a("AddEmployee",{attrs:{addShowing:e.showingAdd},on:{"update:addShowing":function(t){e.showingAdd=t},"update:add-showing":function(t){e.showingAdd=t}}}),a("el-dialog",{attrs:{title:"二维码",visible:e.showQrcodeDialog},on:{"update:visible":function(t){e.showQrcodeDialog=t}}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("canvas",{ref:"canvasCode"})])],1),a("AssginRole",{ref:"AssginRole",attrs:{showRoleDialog:e.showRoleDialog,userId:e.userId},on:{"update:showRoleDialog":function(t){e.showRoleDialog=t},"update:show-role-dialog":function(t){e.showRoleDialog=t}}})],1)])},n=[],o=r("1da1"),i=(r("7db0"),r("d3b7"),r("3ca3"),r("ddb0"),r("b64b"),r("d81d"),r("96cf"),r("8f00")),l=r("01f5"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"新增员工",visible:e.addShowing,width:"40%"},on:{close:e.btnCancal}},[r("el-form",{ref:"addEmployee",staticClass:"newForm",attrs:{"label-width":"120px",model:e.formData,rules:e.rules}},[r("el-form-item",{attrs:{label:"姓名",prop:"username"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入姓名"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1),r("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入手机号"},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1),r("el-form-item",{attrs:{label:"入职时间",prop:"timeOfEntry"}},[r("el-date-picker",{staticStyle:{width:"60%"},attrs:{type:"date",placeholder:"请选择日期"},model:{value:e.formData.timeOfEntry,callback:function(t){e.$set(e.formData,"timeOfEntry",t)},expression:"formData.timeOfEntry"}})],1),r("el-form-item",{attrs:{label:"聘用形式",prop:"formOfEmployment"}},[r("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择"},model:{value:e.formData.formOfEmployment,callback:function(t){e.$set(e.formData,"formOfEmployment",t)},expression:"formData.formOfEmployment"}},e._l(e.EmployeeEnum.hireType,(function(e){return r("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"工号",prop:"workNumber"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入工号"},model:{value:e.formData.workNumber,callback:function(t){e.$set(e.formData,"workNumber",t)},expression:"formData.workNumber"}})],1),r("el-form-item",{attrs:{label:"部门",prop:"departmentName"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择部门"},on:{focus:e.getDepartments},model:{value:e.formData.departmentName,callback:function(t){e.$set(e.formData,"departmentName",t)},expression:"formData.departmentName"}}),e.treeShowing?r("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.treeData,"default-expand-all":"",props:e.defaultProps},on:{"node-click":e.handleNodeClick}}):e._e()],1),r("el-form-item",{attrs:{label:"转正时间",prop:"correctionTime"}},[r("el-date-picker",{staticStyle:{width:"60%"},attrs:{type:"date",placeholder:"请选择日期"},model:{value:e.formData.correctionTime,callback:function(t){e.$set(e.formData,"correctionTime",t)},expression:"formData.correctionTime"}})],1)],1),r("el-row",{attrs:{type:"flex",justify:"center",align:"center"}},[r("el-col",{staticClass:"newCol",attrs:{span:6}},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.btnCancal}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.btnOK}},[e._v("确定")])],1)],1)],1)},s=[],c=(r("b0c0"),r("0e8f")),d=r("ed08"),m={props:{addShowing:{type:Boolean,defaults:!1}},data:function(){return{EmployeeEnum:l["a"],formData:{username:"",mobile:"",formOfEmployment:"",workNumber:"",departmentName:"",timeOfEntry:"",correctionTime:""},rules:{username:[{required:!0,message:"姓名不能为空",trigger:"blur"},{min:1,max:5,message:"姓名长度为1-5位"}],mobile:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3~9]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}],timeOfEntry:[{required:!0,message:"入职时间不能为空",trigger:"blur"}],formOfEmployment:[{required:!0,message:"聘用形式不能为空",trigger:"blur"}],workNumber:[{required:!0,message:"工号不能为空",trigger:"blur"}],departmentName:[{required:!0,message:"部门不能为空",trigger:"change"}],correctionTime:[{required:!0,message:"转正时间不能为空",trigger:"blur"}]},treeData:[],treeShowing:!1,defaultProps:{label:"name",children:"children"},loading:!1}},methods:{getDepartments:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.treeShowing=!0,e.loading=!0,t.next=4,Object(c["e"])();case 4:r=t.sent,a=r.depts,e.treeData=Object(d["a"])(a,""),e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},handleNodeClick:function(e){this.formData.departmentName=e.name,this.treeShowing=!1},btnOK:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.addEmployee.validate();case 3:return t.next=5,Object(i["a"])(e.formData);case 5:e.$message({type:"success",message:"成功添加新员工"}),e.$parent.getListInfo(),e.$parent.showingAdd=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},btnCancal:function(){this.formData={username:"",mobile:"",formOfEmployment:"",workNumber:"",departmentName:"",timeOfEntry:"",correctionTime:""},this.$refs.addEmployee.resetField(),this.$parent.showingAdd=!1}}},f=m,p=(r("42ce"),r("2877")),b=Object(p["a"])(f,u,s,!1,null,"31ba012e",null),h=b.exports,g=r("8975"),v=r("d055"),y=r.n(v),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"分配角色",visible:e.showRoleDialog},on:{close:e.btnCancal}},[r("el-checkbox-group",{model:{value:e.roleIds,callback:function(t){e.roleIds=t},expression:"roleIds"}},e._l(e.List,(function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1),r("el-row",{attrs:{slot:"footer",type:"flex",justify:"center"},slot:"footer"},[r("el-col",{attrs:{span:6}},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.btnOK}},[e._v("确定")]),r("el-button",{attrs:{type:"info",size:"small"},on:{click:e.btnCancal}},[e._v("取消")])],1)],1)],1)},O=[],x=r("90e7"),k=r("c24f"),j={props:{showRoleDialog:{type:Boolean,default:!1},userId:{type:String,default:null}},data:function(){return{List:[],roleIds:[]}},created:function(){this.getRolesList()},methods:{getRolesList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(x["g"])({page:1,pagesize:20});case 2:r=t.sent,a=r.rows,e.List=a;case 5:case"end":return t.stop()}}),t)})))()},getEmployeeRoleInfo:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(k["c"])(e);case 2:a=r.sent,n=a.roleIds,t.roleIds=n;case 5:case"end":return r.stop()}}),r)})))()},btnCancal:function(){this.$emit("update:showRoleDialog",!1)},btnOK:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["b"])({id:e.userId,roleIds:e.roleIds});case 2:e.$emit("update:showRoleDialog",!1);case 3:case"end":return t.stop()}}),t)})))()}}},D=j,E=Object(p["a"])(D,w,O,!1,null,null,null),R=E.exports,_={data:function(){return{loading:!1,List:[],pages:{page:1,size:10,total:0},showingAdd:!1,showQrcodeDialog:!1,showRoleDialog:!1,userId:null}},created:function(){this.getListInfo()},components:{AddEmployee:h,AssginRole:R},methods:{getListInfo:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(i["f"])(e.pages);case 3:r=t.sent,e.List=r.rows,e.pages.total=r.total,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},changePage:function(e){this.pages.page=e,this.getListInfo()},formatEmployment:function(e,t,r,a){var n=l["a"].hireType.find((function(e){return e.id===r}));return n?n.value:"未知"},delEmployees:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$confirm("您确定删除该员工吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"});case 3:return r.next=5,Object(i["c"])(e);case 5:t.getListInfo(),t.$message({type:"success",message:"删除成功"}),r.next=11;break;case 9:r.prev=9,r.t0=r["catch"](0);case 11:case"end":return r.stop()}}),r,null,[[0,9]])})))()},changeShowing:function(){this.showingAdd=!this.showingAdd},exportData:function(){var e=this,t={"姓名":"username","手机号":"mobile","入职日期":"timeOfEntry","聘用形式":"formOfEmployment","转正日期":"correctionTime","工号":"workNumber","部门":"departmentName"};Promise.all([r.e("chunk-519483dc"),r.e("chunk-09290bef")]).then(r.bind(null,"4bf8")).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var n,o,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["f"])({page:1,size:e.pages.total});case 2:n=r.sent,o=n.rows,l=e.formatJson(t,o),a.export_json_to_excel({header:Object.keys(t),data:l,filename:"员工信息表",bookType:"xlsx"});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},formatJson:function(e,t){return t.map((function(t){return Object.keys(e).map((function(r){if("timeOfEntry"===e[r]||"correctionTime"===e[r])return Object(g["formatDate"])(t[e[r]]);if("formOfEmployment"===e[r]){var a=l["a"].hireType.find((function(a){return a.id===t[e[r]]}));return a?a.value:"未知"}return t[e[r]]}))}))},showQrCode:function(e){var t=this;e?(this.showQrcodeDialog=!0,this.$nextTick((function(){y.a.toCanvas(t.$refs.canvasCode,e)}))):this.$message.warning("该用户还未上传成功")},changeState:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.userId=e,r.next=3,t.$refs.AssginRole.getEmployeeRoleInfo(e);case 3:t.showRoleDialog=!0;case 4:case"end":return r.stop()}}),r)})))()}}},S=_,I=Object(p["a"])(S,a,n,!1,null,null,null);t["default"]=I.exports},"0e8f":function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return u}));var a=r("b775"),n=function(){return Object(a["a"])({url:"/company/department",method:"get"})},o=function(e){return Object(a["a"])({url:"/company/department/".concat(e),method:"DELETE"})},i=function(e){return Object(a["a"])({url:"/company/department",method:"post",data:e})},l=function(e){return Object(a["a"])({url:"/company/department/".concat(e),method:"get"})},u=function(e){return Object(a["a"])({url:"/company/department/".concat(e.id),method:"put",data:e})}},"42ce":function(e,t,r){"use strict";r("8146")},8146:function(e,t,r){},"8f00":function(e,t,r){"use strict";r.d(t,"f",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"h",(function(){return l})),r.d(t,"j",(function(){return u})),r.d(t,"e",(function(){return s})),r.d(t,"k",(function(){return c})),r.d(t,"g",(function(){return d})),r.d(t,"i",(function(){return m})),r.d(t,"d",(function(){return f})),r.d(t,"b",(function(){return p}));var a=r("b775"),n=function(e){return Object(a["a"])({url:"/sys/user",method:"get",params:e})},o=function(e){return Object(a["a"])({url:"/sys/user/".concat(e),method:"delete"})},i=function(e){return Object(a["a"])({url:"/sys/user",method:"post",data:e})},l=function(e){return Object(a["a"])({url:"/sys/user/batch",method:"post",data:e})},u=function(e){return Object(a["a"])({url:"/sys/user/".concat(e.id),method:"put",data:e})},s=function(e){return Object(a["a"])({url:"/employees/".concat(e,"/personalInfo"),method:"get"})},c=function(e){return Object(a["a"])({url:"/employees/".concat(e.userId,"/personalInfo"),method:"put",data:e})},d=function(e){return Object(a["a"])({url:"/employees/".concat(e,"/jobs"),method:"get"})},m=function(e){return Object(a["a"])({url:"/employees/".concat(e.userId,"/jobs"),method:"put",data:e})},f=function(){return Object(a["a"])({url:"/sys/user/simple",method:"get"})},p=function(e){return Object(a["a"])({url:"/sys/user/assignRoles",method:"put",data:e})}},"90e7":function(e,t,r){"use strict";r.d(t,"g",(function(){return n})),r.d(t,"f",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c}));var a=r("b775"),n=function(e){return Object(a["a"])({method:"get",url:"/sys/role",params:e})},o=function(e){return Object(a["a"])({method:"get",url:"/company/".concat(e)})},i=function(e){return Object(a["a"])({method:"delete",url:"/sys/role/".concat(e)})},l=function(e){return Object(a["a"])({method:"put",url:"/sys/role/".concat(e.id),data:e})},u=function(e){return Object(a["a"])({method:"get",url:"/sys/role/".concat(e)})},s=function(e){return Object(a["a"])({method:"post",url:"/sys/role",data:e})},c=function(e){return Object(a["a"])({method:"put",url:"/sys/role/assignPrem",data:e})}},ed08:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("53ca"),r("ac1f"),r("00b4"),r("5319"),r("4d63"),r("2c3e"),r("25f0"),r("d3b7"),r("4d90"),r("1276"),r("159b");function a(e,t){var r=[];return e.forEach((function(n){if(n.pid===t){var o=a(e,n.id);o.length&&(n.children=o),r.push(n)}})),r}}}]);